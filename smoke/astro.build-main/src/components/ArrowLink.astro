---
import { Sprite } from 'astro-icon';

const { icon, href, title, always = false } = Astro.props;
---

<a class={always ? 'always' : undefined} href={href} label={title} rel="noopener noreferrer">
    {icon && <Sprite aria-hidden="true" name={icon} size="1.5em" />}
    <span><slot /></span>
    <Sprite aria-hidden="true" class="arrow" pack="mdi" name="arrow-right" size="1.5em" />
</a>

<style>
a {
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    margin-right: -1.5em;
    transition: transform 200ms cubic-bezier(0.23, 1, 0.320, 1);
    color: var(--color-dusk);
}
a > :global(* + *) {
    margin-left: 0.5rem;
}
a > span {
    font-family: var(--font-display);
    font-size: var(--size-500);
}
.arrow {
    opacity: 0;
    transform: translateX(-0.5em);
    margin-left: 0.25em;
    transition: transform 200ms cubic-bezier(0.23, 1, 0.320, 1);
    transition-property: transform, opacity;
}
a:hover,
a:focus {
    transform: translateX(-0.25em);
    color: var(--color-purple);
}
a:active {
    color: var(--color-blue);
}
a:hover .arrow,
a:focus .arrow {
    opacity: 1;
    transform: translateX(0em);
}
.always .arrow {
    opacity: 1;
    transform: translateX(0);
}
.always:hover,
.always:focus {
    transform: translateX(0);
}
.always:hover .arrow,
.always:focus .arrow {
    transform: translateX(0.25em);
}
</style>
